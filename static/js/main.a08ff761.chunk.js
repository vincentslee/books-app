(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{33:function(e,t,n){e.exports=n(64)},38:function(e,t,n){},39:function(e,t,n){},64:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),l=n(29),r=n.n(l),c=(n(38),n(39),n(31)),u=n(2);var i=function(){return o.a.createElement("nav",null,o.a.createElement("h1",null,"Google Books Library"),o.a.createElement("ul",null,o.a.createElement("li",null,o.a.createElement("a",{href:"/"},"Search")),o.a.createElement("li",null,o.a.createElement("a",{href:"/saved"},"View Library"))))},s=n(30),d=n(9),m=n(10),h=n(12),v=n(11),f=n(13);function k(e){var t=e.children;return o.a.createElement("div",null,t)}function E(e){var t=e.children;return o.a.createElement("div",null,t)}function p(e){var t=e.children;return o.a.createElement("div",null,t)}var b=function(e){var t=e.onClick,n=e.children;return o.a.createElement("button",{onClick:t},n)};function g(e){var t=e.googleId,n=e.title,a=e.authors,l=e.description,r=e.href,c=e.pageCount,u=e.thumbnail,i=e.clickEvent,s=e.saved;return o.a.createElement("li",null,o.a.createElement("div",null,s?o.a.createElement("button",{className:"btn",onClick:function(e){return i(e,t)}},"Remove"):o.a.createElement("button",{className:"btn",onClick:function(e){return i(e,t,n,a,l,r,c,u)}},"Save to Library"),o.a.createElement("a",{className:"btn",href:r,target:"_blank",rel:"noopener noreferrer"},"View Book Info")),o.a.createElement("h4",null,n),o.a.createElement("h5",null,"by ",a.length>1?a.reduce(function(e,t){return[e,", ",t]}):a[0]),o.a.createElement(E,null,o.a.createElement("div",null,o.a.createElement("img",{src:u,alt:n})),o.a.createElement(k,null,o.a.createElement("p",null,l))),s&&o.a.createElement("div",null,o.a.createElement(k,null,o.a.createElement("small",null,c," pages"))))}function S(e){var t=e.children;return o.a.createElement("ul",null,t)}var B=n(15),I=n.n(B),y={getBooks:function(e){return I.a.get("/api/books",{params:{q:e}})},getSavedBooks:function(){return I.a.get("/api/savedBooks")},saveBook:function(e){return I.a.post("/api/savedBooks",e)},deleteSavedBook:function(e){return I.a.delete("/api/savedBooks/".concat(e))}},C=function(e){function t(){var e,n;Object(d.a)(this,t);for(var a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];return(n=Object(h.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(o)))).state={books:[],bookSearch:"",savedBooks:[],searched:""},n.checkIfSaved=function(e){for(var t in n.state.savedBooks)if(n.state.savedBooks[t].googleId===e)return!0;return!1},n.checkSavedDate=function(e){for(var t in n.state.savedBooks)if(n.state.savedBooks[t].googleId===e)return y.getDate(n.state.savedBooks[t]._id);return null},n.loadSavedBooks=function(){y.getSavedBooks().then(function(e){n.setState({savedBooks:e.data})})},n.handleInputChange=function(e){var t=e.target,a=t.name,o=t.value;n.setState(Object(s.a)({},a,o))},n.handleFormSubmit=function(e){e.preventDefault(),n.setState({searched:n.state.bookSearch,bookSearch:""}),y.getBooks(n.state.bookSearch).then(function(e){return n.setState({books:e.data},function(){return console.log(e.data)})}).catch(function(e){return console.log(e)})},n.deleteSavedBook=function(e,t){e.preventDefault(),y.deleteSavedBook(t).then(function(e){return n.loadSavedBooks()}).catch(function(e){return console.log(e)})},n.handleSave=function(e,t,a,o,l,r,c,u){e.preventDefault(),y.saveBook({googleId:t,title:a,authors:o,description:l,href:r,pageCount:c,thumbnail:u}).then(function(e){return n.loadSavedBooks()})},n}return Object(f.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.loadSavedBooks()}},{key:"render",value:function(){var e=this;return o.a.createElement(p,null,o.a.createElement(E,null,o.a.createElement("div",null,o.a.createElement("h4",null,"Search"),o.a.createElement("form",null,o.a.createElement("div",null,o.a.createElement("label",{htmlFor:"bookSearch"},"Name of Book or Author"),o.a.createElement("input",{type:"text",className:"form-control",id:"bookSearch",name:"bookSearch",value:this.state.bookSearch,onChange:this.handleInputChange})),o.a.createElement(b,{onClick:this.handleFormSubmit},"Search")))),o.a.createElement(E,null,o.a.createElement("div",null,""===this.state.searched?o.a.createElement("h4",null,"Search Results"):o.a.createElement("h4",null,"Search Results for ",this.state.searched),this.state.books.length?o.a.createElement(S,null,this.state.books.map(function(t){return o.a.createElement(g,{key:t.volumeInfo.infoLink,googleId:t.id,title:t.volumeInfo.title||"Title Not Found",authors:t.volumeInfo.authors||["Author Not Found"],description:t.volumeInfo.description||"No description available",thumbnail:t.volumeInfo.imageLinks?t.volumeInfo.imageLinks.smallThumbnail:"img/placeholder.png",href:t.volumeInfo.infoLink,pageCount:t.volumeInfo.pageCount,saved:e.checkIfSaved(t.id),clickEvent:e.checkIfSaved(t.id)?e.deleteSavedBook:e.handleSave})})):o.a.createElement("h6",null,"Nothing found."))))}}]),t}(a.Component),j=function(e){function t(){var e,n;Object(d.a)(this,t);for(var a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];return(n=Object(h.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(o)))).state={savedBooks:[]},n.loadSavedBooks=function(){y.getSavedBooks().then(function(e){return n.setState({savedBooks:e.data})})},n.deleteSavedBook=function(e,t){e.preventDefault(),y.deleteSavedBook(t).then(function(e){return n.loadSavedBooks()}).catch(function(e){return console.log(e)})},n}return Object(f.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.loadSavedBooks()}},{key:"render",value:function(){var e=this;return o.a.createElement(p,null,o.a.createElement(E,null,o.a.createElement("div",null,o.a.createElement("h1",null,"Library"))),o.a.createElement(E,null,o.a.createElement("div",null,o.a.createElement("h4",null,"Saved Books"),this.state.savedBooks.length?o.a.createElement(S,null,this.state.savedBooks.map(function(t){return o.a.createElement(g,{key:t.googleId,googleId:t.googleId,title:t.title,authors:t.authors,description:t.description,thumbnail:t.thumbnail,href:t.href,pageCount:t.pageCount,saved:!0,clickEvent:e.deleteSavedBook})})):o.a.createElement("h6",null,"No books"))))}}]),t}(a.Component),O=function(e){function t(){return Object(d.a)(this,t),Object(h.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return o.a.createElement("div",null,"404 Page Not Found")}}]),t}(a.Component);var N=function(){return o.a.createElement(c.a,null,o.a.createElement("div",null,o.a.createElement(i,null),o.a.createElement(u.c,null,o.a.createElement(u.a,{exact:!0,path:"/",component:C}),o.a.createElement(u.a,{exact:!0,path:"/saved",component:j}),o.a.createElement(u.a,{component:O}))))};r.a.render(o.a.createElement(N,null),document.getElementById("root"))}},[[33,1,2]]]);
//# sourceMappingURL=main.a08ff761.chunk.js.map